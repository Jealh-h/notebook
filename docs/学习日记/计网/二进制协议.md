# 二进制协议

二进制协议就是一串字节流，通常包括消息头(header)和消息体(body)，消息头的长度固定，并且消息头包括了消息体的长度。这样就能够从数据流中解析出一个完整的二进制数据。如下是一个典型的二进制协议：

|             header             |    Data     |
| :----------------------------: | :---------: |
| Guide\length\DataCRC\HeaderCrC | CMD\Content |

## 优点

1. 节约内存、带宽

二进制协议只保存了必须的信息，在需要传递大量信息的时候

2. 方便加密

二进制协议很方便使用异或或者压缩的方式进行加密，防止协议被破解，从而保护了传递的信息，增加协议破解的难度。

## 缺点

1. 难以解析

对于每一条消息，因为无法自解释，所以对于每一条消息都必须要有对应的文档进行说明。文档和代码的一致性就显得很重要了。

2. 不跨处理器

因为是严格的内存到对象的转换，所以要求发送方与接收方的的机器字节序保持一致，否则无法正确解析。

3. 不方便消息的修改。

对于消息的扩展是比较方便的，不过也只能在消息的后面添加字段，才能做到兼容。如果修改已有字段的顺序就会造成消息无法正确解析。
