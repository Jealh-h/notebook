(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{232:function(t,a,v){"use strict";v.r(a);var s=v(6),_=Object(s.a)({},(function(){var t=this,a=t.$createElement,v=t._self._c||a;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"缓存策略"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#缓存策略"}},[t._v("#")]),t._v(" 缓存策略")]),t._v(" "),v("h2",{attrs:{id:"分类"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#分类"}},[t._v("#")]),t._v(" 分类")]),t._v(" "),v("ul",[v("li",[t._v("浏览器缓存")]),t._v(" "),v("li",[t._v("Http 缓存")])]),t._v(" "),v("h2",{attrs:{id:"优点"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#优点"}},[t._v("#")]),t._v(" 优点")]),t._v(" "),v("ul",[v("li",[t._v("缩短网页请求资源的距离，减少延迟，并且由于缓存文件可以重复利用，减少带宽，降低网络负荷。")])]),t._v(" "),v("h2",{attrs:{id:"http-缓存"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#http-缓存"}},[t._v("#")]),t._v(" http 缓存")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("强缓存")]),t._v(" "),v("ul",[v("li",[t._v("Pragma")]),t._v(" "),v("li",[t._v("Cache-COntrol")]),t._v(" "),v("li",[t._v("Expires")])])]),t._v(" "),v("li",[v("p",[t._v("协商缓存")]),t._v(" "),v("ul",[v("li",[t._v("Last-Modify/if-modify-since")]),t._v(" "),v("li",[t._v("Etag/if-none-match")])])])]),t._v(" "),v("h2",{attrs:{id:"浏览器缓存"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#浏览器缓存"}},[t._v("#")]),t._v(" 浏览器缓存")]),t._v(" "),v("ul",[v("li",[t._v("本地存储\n"),v("ul",[v("li",[t._v("localstorage")]),t._v(" "),v("li",[t._v("sessionStorage")]),t._v(" "),v("li",[t._v("Cookie")]),t._v(" "),v("li",[t._v("WebSql")]),t._v(" "),v("li",[t._v("indexDB")]),t._v(" "),v("li",[t._v("Application Cache")]),t._v(" "),v("li",[t._v("PWA")])])]),t._v(" "),v("li",[t._v("默认缓存\n"),v("ul",[v("li",[t._v("往返缓存 BFCache")])])])]),t._v(" "),v("h2",{attrs:{id:"强制缓存"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#强制缓存"}},[t._v("#")]),t._v(" 强制缓存")]),t._v(" "),v("ul",[v("li",[v("strong",[t._v("不存在")]),t._v("该缓存结果和缓存标识，强制缓存失效，直接向服务器发起请求")]),t._v(" "),v("li",[v("strong",[t._v("都存在")]),t._v("缓存结果和缓存标识，"),v("strong",[t._v("但是")]),t._v("缓存结果失效，强缓失效使用协商缓存。携带缓存标识请求服务器")]),t._v(" "),v("li",[v("strong",[t._v("都存在")]),t._v("缓存结果与缓存标识，且结果没有失效，强缓存生效直接返回该结果。")])]),t._v(" "),v("h2",{attrs:{id:"强缓的缓存规则"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#强缓的缓存规则"}},[t._v("#")]),t._v(" 强缓的缓存规则")]),t._v(" "),v("p",[t._v("浏览器向服务器发送请求时，服务器会将缓存规则放入 http 响应报文的 http 头部（响应头）一起返回给浏览器，控制强制缓存的字段分别是 Expires 和 Cache-Control，其中\nCache-control 优先级比 Expires 高。")]),t._v(" "),v("h2",{attrs:{id:"expires"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#expires"}},[t._v("#")]),t._v(" Expires")]),t._v(" "),v("p",[t._v("Expires 是 Http/1.0 控制网页缓存字段，其值为服务其返回该请求结果缓存的到期时间，即再次发起 1 该请求时，如果客户端的时间小于 Exipres 的值，就使用强制缓存")]),t._v(" "),v("p",[t._v("由于某些原因，客户端时间与服务端时间可能会有误差，那么强制缓存则会失效，这样的话强制缓存就没有意义了。")]),t._v(" "),v("h2",{attrs:{id:"cache-control"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cache-control"}},[t._v("#")]),t._v(" Cache-Control")]),t._v(" "),v("h3",{attrs:{id:"可缓存性"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#可缓存性"}},[t._v("#")]),t._v(" 可缓存性")]),t._v(" "),v("p",[t._v("public:表明响应可以被任何对象（客户端，代理服务器）缓存，即使是通常不可缓存的类容（响应头中没有 max-age 或 expires,请求方法是 POST）\nprivate:表明响应只能被单个用户缓存，不能作为共享缓存（代理服务器不能缓存它）。私有缓存可以缓存响应类容。（例如浏览器）\nno-cache:实际上，在每次请求中使用任何缓存响应之前，它都意味着“使用服务器重新验证”。\nno-store:不使用任何缓存，不能写入 cache 也不能写入磁盘")]),t._v(" "),v("h3",{attrs:{id:"到期"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#到期"}},[t._v("#")]),t._v(" 到期")]),t._v(" "),v("p",[t._v("max-age=<seconds>\n设置缓存存储的最大周期，超过这个时间缓存被认为过期，时间是相对与请求时间")]),t._v(" "),v("p",[t._v("s-maxage=<seconds>\n覆盖 Expires 或者 max-age,但是仅适用于共享缓存（代理），私有缓存会忽略它")]),t._v(" "),v("p",[t._v("max-stale=<seconds>\n表明客户端愿意接收一个已经过期的资源。可以设置一个可选的秒数，表示响应不能已经过时超过该给定的时间。")]),t._v(" "),v("p",[t._v("min-fresh=<seconds>\n表示客户端希望获取一个能在指定的秒数内保持其最新状态的响应。")]),t._v(" "),v("h3",{attrs:{id:"重新验证和重新加载"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#重新验证和重新加载"}},[t._v("#")]),t._v(" 重新验证和重新加载")]),t._v(" "),v("p",[t._v("must-revalidate\n一旦过期，在成功向原始服务器验证之前，缓存不能用该资源响应后续请求。")]),t._v(" "),v("p",[t._v("proxy-revalidate\n与 must-revalidate 作用相同，但它仅适用于共享缓存（例如代理），并被私有缓存忽略。")])])}),[],!1,null,null,null);a.default=_.exports}}]);